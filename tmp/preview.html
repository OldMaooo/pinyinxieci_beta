<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>预览 V3 - 精准复刻线下版 · 半自动版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @font-face { font-family: 'Kaiti'; src: local('STKaiti'), local('KaiTi'), local('楷体'); }
        body { background-color: #f8fafc; margin: 0; font-family: sans-serif; }
        .a4-canvas { width: 100vw; max-width: 210mm; margin: 0 auto; background: white; min-height: 100vh; box-shadow: 0 0 30px rgba(0,0,0,0.05); }
        .tian-ge { width: 1.5rem; height: 1.5rem; border: 1px solid #000; background: white; display: flex; align-items: center; justify-content: center; }
        .idx-text { font-size: 10px; font-family: monospace; font-weight: bold; }
        .popover-up { animation: pop-up 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop-up { 0% { opacity: 0; transform: translateY(10px) scale(0.8); } 100% { opacity: 1; transform: translateY(0) scale(1); } }
        .kaiti { font-family: 'Kaiti', 'STKaiti', serif; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const MOCK_WORDS = [
            { id: '1', word: '山坡', pinyin: 'shān pō', status: 'white' },
            { id: '2', word: '学校', pinyin: 'xué xiào', status: 'white' },
            { id: '3', word: '飘扬', pinyin: 'piāo yáng', status: 'red' },
            { id: '4', word: '课文', pinyin: 'kè wén', status: 'white' },
            { id: '5', word: '声音', pinyin: 'shēng yīn', status: 'white' },
            { id: '6', word: '招引', pinyin: 'zhāo yǐn', status: 'white' },
        ];

        function App() {
            const [words, setWords] = useState(MOCK_WORDS);
            const [time, setTime] = useState(0);
            const [hintWord, setHintWord] = useState(null);

            useEffect(() => {
                const interval = setInterval(() => setTime(prev => prev + 1), 1000);
                return () => clearInterval(interval);
            }, []);

            const formatTime = (s) => {
                const mins = Math.floor(s / 60);
                const secs = s % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            const toggleStatus = (id) => {
                setWords(prev => prev.map(w => w.id === id ? { ...w, status: w.status === 'red' ? 'white' : 'red' } : w));
            };

            const handleHintStart = (item) => {
                setHintWord(item.word);
                setWords(prev => prev.map(w => w.id === item.id ? { ...w, status: 'red' } : w));
            };

            return (
                <div className="flex flex-col min-h-screen">
                    <header className="sticky top-0 bg-white/90 backdrop-blur-md border-b px-6 py-4 flex justify-between items-center z-50 shadow-sm">
                        <div className="flex items-center gap-4">
                            <h1 className="text-lg font-bold text-blue-600 tracking-tight italic">看拼音写词 · 线上版</h1>
                            <span className="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-[10px] font-bold uppercase tracking-wider">Practice Mode</span>
                        </div>
                        <div className="flex items-center gap-6">
                            <div className="flex items-center gap-2 font-mono text-xl font-bold text-slate-700 bg-slate-100 px-4 py-1.5 rounded-xl">
                                <i data-lucide="timer" class="text-blue-500 w-5 h-5"></i>
                                {formatTime(time)}
                            </div>
                            <button className="bg-slate-900 text-white px-6 py-2 rounded-xl font-bold active:scale-95 transition-all">
                                结束练习
                            </button>
                        </div>
                    </header>

                    <main className="flex-1 p-4 md:p-12">
                        <div className="a4-canvas p-12 md:p-20 rounded-md shadow-lg border border-slate-200">
                            <div className="grid grid-cols-3 gap-x-12 gap-y-16">
                                {words.map((item, index) => (
                                    <div key={item.id} className="flex flex-col gap-3">
                                        <div 
                                            className="relative select-none cursor-help active:opacity-70"
                                            onPointerDown={() => handleHintStart(item)}
                                            onPointerUp={() => setHintWord(null)}
                                            onPointerLeave={() => setHintWord(null)}
                                        >
                                            <span className="text-2xl font-bold kaiti tracking-widest text-slate-800">
                                                {item.pinyin}
                                            </span>
                                            {hintWord === item.word && (
                                                <div className="absolute -top-16 left-0 bg-blue-600 text-white text-4xl px-6 py-3 rounded-2xl shadow-2xl popover-up z-50 kaiti font-bold ring-4 ring-white">
                                                    {item.word}
                                                    <div className="absolute -bottom-2 left-6 w-4 h-4 bg-blue-600 rotate-45"></div>
                                                </div>
                                            )}
                                        </div>

                                        <div className="flex items-center shadow-sm w-fit">
                                            <div className="tian-ge border-r-0 bg-slate-50 text-slate-900 idx-text">
                                                {index + 1}
                                            </div>
                                            <button 
                                                onClick={() => toggleStatus(item.id)}
                                                className={`tian-ge transition-all ${item.status === 'red' ? 'bg-red-500 border-red-600' : 'bg-white border-black'}`}
                                            />
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        setTimeout(() => lucide.createIcons(), 100);
    </script>
</body>
</html>
