# Decisions - 继续词库扩充与学期切换功能

## 2026-02-06T05:03:00Z - Default Semester Choice
- 决定默认学期使用"三年级上册"以保持现有行为一致
- 使用 localStorage 持久化学期选择

## 2026-02-06T05:35:00Z - Supabase ID 保护策略

### 关键决策：ID 格式双轨制

| 学期 | ID 格式 | 原因 |
|------|---------|------|
| 三年级上册 | `3up-单元1-山坡-0` | 保护现有掌握记录 |
| 其他学期 | `一年级上册-单元1-山坡-0` | 新格式避免冲突 |

### 影响
- ✅ 三年级上册：现有掌握记录完全保留
- ⚠️ 其他学期：新数据，没有历史记录
- ⚠️ 切换回三年级上册：需要确保 ID 格式一致

## 2026-02-06T05:40:00Z - 数据结构设计

### JSON 文件结构
```json
{
  "version": "1.0",
  "gradeSemester": "一年级上册",
  "count": 224,
  "wordBank": [
    {
      "word": "天空",
      "pinyin": "tiān kōng",
      "grade": "一年级",
      "semester": "上册",
      "unit": 1
    }
  ]
}
```

### processedUnits 转换
- 从 wordBank 数组按 unit 分组
- 每个单元包含词汇数组
- 自动生成动态 ID
